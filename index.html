<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLB.ai - Your Personal AI Paralegal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@900&family=Lora:wght@500&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        .font-logo { font-family: 'Playfair Display', serif; }
        .font-punchline { font-family: 'Lora', serif; }
        .font-body { font-family: 'Poppins', sans-serif; }
        body {
            /* UPDATED: Black wooden surface background */
            background-color: #000000;
            background-image: url('https://www.transparenttextures.com/patterns/dark-wood.png');
            font-family: 'Poppins', sans-serif;
            position: relative;
            overflow-x: hidden;
        }
        /* NEW: Doodle animation container */
        #animation-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        /* NEW: Doodle styles */
        .doodle {
            position: absolute;
            bottom: -150px;
            /* Faint pink color for doodles */
            color: rgba(249, 168, 212, 0.07);
            font-size: 60px;
            animation: floatUp 20s infinite linear;
            user-select: none;
        }
        /* NEW: Doodle animation keyframes */
        @keyframes floatUp {
            from {
                transform: translateY(0) translateX(var(--x-start)) rotate(0deg);
                opacity: 0;
            }
            25% {
                opacity: 1;
            }
            75% {
                opacity: 1;
            }
            to {
                transform: translateY(-120vh) translateX(var(--x-end)) rotate(720deg);
                opacity: 0;
            }
        }
        /* UPDATED: Pink text with reduced brightness */
        .text-bright-pink {
            color: #f472b6; /* A slightly deeper pink */
            text-shadow: 0 0 15px rgba(244, 114, 182, 0.5), 0 0 5px rgba(244, 114, 182, 0.7); /* Reduced glow */
        }
        .btn-blue {
            background-color: #3b82f6; color: white;
            padding: 0.6rem 1.25rem; border-radius: 0.5rem;
            font-weight: bold; transition: all 0.2s ease-in-out;
            border: 1px solid rgba(255,255,255,0.3);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.7);
        }
        .btn-blue:hover:not(:disabled) { background-color: #2563eb; transform: scale(1.05); box-shadow: 0 0 30px rgba(59, 130, 246, 1); }
        .btn-blue:disabled { background-color: #555; cursor: not-allowed; box-shadow: none; }
        .btn-red {
            background-color: #dc2626; color: white;
            padding: 0.6rem 1.25rem; border-radius: 0.5rem;
            font-weight: bold; transition: all 0.2s ease-in-out;
            border: 1px solid rgba(255,255,255,0.3);
            box-shadow: 0 0 20px rgba(220, 38, 38, 0.7);
        }
        .btn-red:hover:not(:disabled) { background-color: #b91c1c; transform: scale(1.05); box-shadow: 0 0 30px rgba(220, 38, 38, 1); }
        .btn-launch { padding: 0.8rem 2rem; }
        .crystal-glass-card {
            background: rgba(255, 255, 255, 0.05); /* Slightly adjusted for black background */
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        #auth-modal {
            transition: opacity 0.3s ease-in-out;
        }
        .auth-form input, .auth-form select {
            background-color: rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
        }
        .auth-form input::placeholder { color: rgba(255,255,255,0.5); }
        .auth-form select option { background-color: #1f2937; color: white; }
         .testimonial-container { position: relative; }
        .testimonial-scroller {
            display: flex; overflow-x: auto;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        .testimonial-scroller::-webkit-scrollbar { display: none; }
        .testimonial-card {
            flex: 0 0 100%;
            scroll-snap-align: center;
        }
        .testimonial-nav {
            position: absolute; top: 50%; transform: translateY(-50%);
            background-color: rgba(0,0,0,0.3); color: white;
            border-radius: 50%; border: 1px solid rgba(255,255,255,0.3);
            width: 40px; height: 40px;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: background-color 0.2s;
        }
        .testimonial-nav:hover { background-color: rgba(0,0,0,0.6); }
        .testimonial-nav.prev { left: -20px; }
        .testimonial-nav.next { right: -20px; }
        .testimonial-nav:disabled { opacity: 0.3; cursor: not-allowed; }

        /* Chatbot styles */
        #chatbot-messages::-webkit-scrollbar { width: 6px; }
        #chatbot-messages::-webkit-scrollbar-track { background: rgba(255,255,255,0.1); border-radius: 3px; }
        #chatbot-messages::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.3); border-radius: 3px; }
        .chatbot-message { max-width: 90%; padding: 8px 12px; border-radius: 0.75rem; margin-bottom: 4px; word-wrap: break-word; }
        .user-message { background-color: #3b82f6; color: white; margin-left: auto; border-bottom-right-radius: 0.25rem; }
        .bot-message { background-color: #4b5563; color: white; margin-right: auto; border-bottom-left-radius: 0.25rem; }
    </style>
</head>
<body class="font-body text-gray-300">

    <!-- NEW: Animation container for doodles -->
    <div id="animation-container"></div>

    <!-- Main Content -->
    <div id="main-content">
        <header class="fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-lg shadow-sm border-b border-white/10">
            <div class="container mx-auto px-6 py-4 flex justify-between items-center">
                <a href="#" class="font-logo text-3xl font-black text-bright-pink">LLB.ai</a>
                <nav class="hidden md:flex space-x-4 items-center">
                    <a href="#features" class="btn-blue">Features</a>
                    <a href="#testimonials" class="btn-blue">Testimonials</a>
                    <a href="#faq" class="btn-blue">FAQ</a>
                    <a href="terms.html" class="btn-blue">Terms</a>
                    <a href="about.html" class="btn-blue">About Us</a>
                    
                    <div id="nav-auth-section" class="flex items-center space-x-4">
                        <button id="login-signup-btn" class="btn-red btn-launch">Login / Sign Up</button>
                        <div id="user-info-nav" class="hidden items-center space-x-4">
                            <span id="user-greeting" class="text-white font-semibold"></span>
                            <a href="app.html" class="btn-blue">Launch App</a>
                            <button id="logout-btn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition">Logout</button>
                        </div>
                    </div>
                </nav>
                <button id="mobile-menu-button" class="md:hidden text-white focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </header>
        <main class="relative z-10 pt-32">
             <section class="text-center pb-20 px-6">
                <h1 class="font-logo text-8xl md:text-9xl font-black text-bright-pink">LLB.ai</h1>
                <h2 class="font-punchline text-4xl md:text-5xl font-medium text-bright-pink leading-tight mb-6">Your Personal AI Paralegal.</h2>
                <p class="font-punchline text-xl text-white max-w-3xl mx-auto mb-8">Stop guessing, start strategizing. LLB.ai uses cutting-edge Generative AI to provide analysis, negotiation support, and actionable insights for your legal documents.</p>
                <button id="try-free-btn" class="btn-blue btn-launch inline-block">Free Trial</button>
                <p class="text-sm text-gray-300 mt-4">No credit card required.</p>
            </section>
            
            <section id="features" class="py-20 px-6">
                <div class="container mx-auto">
                    <h2 class="font-logo text-5xl font-black text-center mb-12 text-bright-pink">Core Features</h2>
                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                        <div class="crystal-glass-card p-8 rounded-xl text-center">
                            <h3 class="text-2xl font-bold mb-4 text-bright-pink">Smart Dashboard</h3>
                            <p>Visually extracts key dates, financials, and participants so you see what matters, instantly.</p>
                        </div>
                        <div class="crystal-glass-card p-8 rounded-xl text-center">
                            <h3 class="text-2xl font-bold mb-4 text-bright-pink">AI-Powered Analysis</h3>
                            <p>Get a crystal-clear summary, a breakdown of obligations, and a list of potential risks in seconds.</p>
                        </div>
                        <div class="crystal-glass-card p-8 rounded-xl text-center">
                            <h3 class="text-2xl font-bold mb-4 text-bright-pink">Negotiation Simulator</h3>
                            <p>Redraft unfavorable clauses with AI suggestions to strengthen your position before you sign.</p>
                        </div>
                        <div class="crystal-glass-card p-8 rounded-xl text-center">
                            <h3 class="text-2xl font-bold mb-4 text-bright-pink">Comparative "Redline"</h3>
                            <p>Upload two versions of a document and instantly see a summary of all material changes.</p>
                        </div>
                        <div class="crystal-glass-card p-8 rounded-xl text-center">
                            <h3 class="text-2xl font-bold mb-4 text-bright-pink">E-Signature</h3>
                            <p>Complete the workflow by signing your document directly in the app once you're satisfied.</p>
                        </div>
                        <div class="crystal-glass-card p-8 rounded-xl text-center">
                            <h3 class="text-2xl font-bold mb-4 text-bright-pink">AI Contract Drafting</h3>
                            <p>Generate new legal contracts from scratch based on your needs. Just describe the agreement, and our AI will draft a starting point for you.</p>
                        </div>
                        <div class="crystal-glass-card p-8 rounded-xl text-center">
                            <h3 class="text-2xl font-bold mb-4 text-bright-pink">Language Translator</h3>
                            <p>Translate legal documents from other languages into English for seamless analysis.</p>
                        </div>
                        <div class="crystal-glass-card p-8 rounded-xl text-center">
                            <h3 class="text-2xl font-bold mb-4 text-bright-pink">Risk Score</h3>
                            <p>Receive an AI-generated score from 1-10 indicating the overall risk level of the document.</p>
                        </div>
                        <div class="crystal-glass-card p-8 rounded-xl text-center">
                            <h3 class="text-2xl font-bold mb-4 text-bright-pink">Clause Library</h3>
                            <p>Save and categorize your favorite AI-generated clauses for use in future documents.</p>
                        </div>
                         <div class="crystal-glass-card p-8 rounded-xl text-center">
                            <h3 class="text-2xl font-bold mb-4 text-bright-pink">Secure & Private</h3>
                            <p>Your documents are encrypted and never stored after analysis. Your privacy is our priority.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="testimonials" class="py-20 px-6">
                <div class="container mx-auto text-center">
                    <h2 class="font-logo text-5xl font-black mb-12 text-bright-pink">Trusted by Innovators</h2>
                    <div class="max-w-3xl mx-auto testimonial-container">
                        <div class="testimonial-scroller">
                            <div class="testimonial-card w-full">
                                <div class="crystal-glass-card p-8 rounded-xl mx-4">
                                    <p class="font-punchline text-2xl italic mb-4 text-bright-pink">"An indispensable tool for founders. The dashboard and risk score saved me hours of manual review."</p>
                                    <p class="font-bold text-stone-300">- Priya K., Founder of ClimateTech Innovations</p>
                                </div>
                            </div>
                            <div class="testimonial-card w-full">
                                <div class="crystal-glass-card p-8 rounded-xl mx-4">
                                    <p class="font-punchline text-2xl italic mb-4 text-bright-pink">"The negotiation simulator is a game-changer. It gave me the confidence to push back on unfavorable terms."</p>
                                    <p class="font-bold text-stone-300">- Rohan M., Freelance Developer</p>
                                </div>
                            </div>
                            <div class="testimonial-card w-full">
                                <div class="crystal-glass-card p-8 rounded-xl mx-4">
                                    <p class="font-punchline text-2xl italic mb-4 text-bright-pink">"I use the redline feature constantly to track changes in contracts. It's faster than any other software I've tried."</p>
                                    <p class="font-bold text-stone-300">- Aisha S., Real Estate Agent</p>
                                </div>
                            </div>
                             <div class="testimonial-card w-full">
                                <div class="crystal-glass-card p-8 rounded-xl mx-4">
                                    <p class="font-punchline text-2xl italic mb-4 text-bright-pink">"As a student, LLB.ai helps me understand complex academic papers and terms. It's my secret weapon."</p>
                                    <p class="font-bold text-stone-300">- Sameer V., Law Student</p>
                                </div>
                            </div>
                             <div class="testimonial-card w-full">
                                <div class="crystal-glass-card p-8 rounded-xl mx-4">
                                    <p class="font-punchline text-2xl italic mb-4 text-bright-pink">"The language translator is flawless. I can now analyze international contracts with ease."</p>
                                    <p class="font-bold text-stone-300">- Elena R., Import/Export Manager</p>
                                </div>
                            </div>
                             <div class="testimonial-card w-full">
                                <div class="crystal-glass-card p-8 rounded-xl mx-4">
                                    <p class="font-punchline text-2xl italic mb-4 text-bright-pink">"Simple, powerful, and beautifully designed. This is what modern software should be."</p>
                                    <p class="font-bold text-stone-300">- David L., Tech Blogger</p>
                                </div>
                            </div>
                        </div>
                        <button class="testimonial-nav prev" disabled>&lt;</button>
                        <button class="testimonial-nav next">&gt;</button>
                    </div>
                </div>
            </section>

            <section id="faq" class="py-20 px-6">
                <div class="container mx-auto max-w-4xl">
                    <h2 class="font-logo text-5xl font-black text-center mb-12 text-bright-pink">Frequently Asked Questions</h2>
                    <div class="space-y-4">
                        <div class="crystal-glass-card rounded-lg">
                            <button class="faq-toggle w-full text-left p-4 font-semibold text-lg flex justify-between items-center text-bright-pink">Is this a replacement for a lawyer?<span class="transform transition-transform">-</span></button>
                            <div class="faq-content overflow-hidden transition-all duration-500 ease-in-out"><p class="p-4 pt-0">No. LLB.ai is a powerful AI tool for understanding and should not be considered legal advice. We always recommend consulting a qualified legal professional for critical matters.</p></div>
                        </div>
                        <div class="crystal-glass-card rounded-lg">
                            <button class="faq-toggle w-full text-left p-4 font-semibold text-lg flex justify-between items-center text-bright-pink">What file formats can I upload?<span class="transform transition-transform">+</span></button>
                            <div class="faq-content max-h-0 overflow-hidden transition-all duration-500 ease-in-out"><p class="p-4 pt-0">Currently, you can upload PDF and TXT files, or paste text directly into the app. The app is optimized for text-based documents for the highest accuracy.</p></div>
                        </div>
                        <div class="crystal-glass-card rounded-lg">
                            <button class="faq-toggle w-full text-left p-4 font-semibold text-lg flex justify-between items-center text-bright-pink">How secure is my data?<span class="transform transition-transform">+</span></button>
                            <div class="faq-content max-h-0 overflow-hidden transition-all duration-500 ease-in-out"><p class="p-4 pt-0">Security is our top priority. Your documents are transmitted over SSL, processed in memory, and are never stored on our servers after the analysis is complete. With user accounts, your chat history is saved securely in your personal Firestore database.</p></div>
                        </div>
                        <div class="crystal-glass-card rounded-lg">
                            <button class="faq-toggle w-full text-left p-4 font-semibold text-lg flex justify-between items-center text-bright-pink">Can I use LLB.ai for any type of document?<span class="transform transition-transform">+</span></button>
                            <div class="faq-content max-h-0 overflow-hidden transition-all duration-500 ease-in-out"><p class="p-4 pt-0">While it's optimized for legal documents like contracts, leases, and NDAs, you can upload any text-based document for summarization and analysis. The risk analysis features work best on legal text.</p></div>
                        </div>
                        <div class="crystal-glass-card rounded-lg">
                            <button class="faq-toggle w-full text-left p-4 font-semibold text-lg flex justify-between items-center text-bright-pink">Do you offer plans for teams or businesses?<span class="transform transition-transform">+</span></button>
                            <div class="faq-content max-h-0 overflow-hidden transition-all duration-500 ease-in-out"><p class="p-4 pt-0">We are currently focused on providing the best possible tool for individuals. Team and enterprise plans with collaborative features are on our roadmap for the future!</p></div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        <footer class="border-t border-white/10 py-8 text-center mt-10 relative z-10">
            <p class="text-stone-300">&copy; 2025 LLB.ai. All Rights Reserved.</p>
        </footer>
    </div>

    <!-- Auth Modal -->
    <div id="auth-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4">
        <div class="crystal-glass-card rounded-lg shadow-2xl w-full max-w-md relative">
            <button id="close-auth-modal" class="absolute top-4 right-4 text-white text-2xl font-bold">&times;</button>
            <div id="login-view" class="p-8">
                <h2 class="font-logo text-4xl text-bright-pink mb-6 text-center">Login</h2>
                <form id="login-form" class="auth-form space-y-4">
                    <input type="email" id="login-email" placeholder="Email" class="w-full p-3 rounded-md" required>
                    <input type="password" id="login-password" placeholder="Password" class="w-full p-3 rounded-md" required>
                    <button type="submit" class="w-full btn-blue p-3">Login</button>
                    <p id="login-error" class="text-red-400 text-sm text-center h-4"></p>
                </form>
                <div class="text-center mt-4">
                    <a href="#" id="forgot-password-link" class="text-sm text-gray-400 hover:text-white">Forgot Password?</a>
                    <p class="text-sm mt-2">Don't have an account? <a href="#" id="show-signup-link" class="font-bold text-bright-pink hover:underline">Sign Up</a></p>
                </div>
            </div>
            <div id="signup-view" class="hidden p-8">
                <h2 class="font-logo text-4xl text-bright-pink mb-6 text-center">Create Account</h2>
                <form id="signup-form" class="auth-form space-y-4">
                    <input type="text" id="signup-name" placeholder="Full Name" class="w-full p-3 rounded-md" required>
                    <input type="email" id="signup-email" placeholder="Email" class="w-full p-3 rounded-md" required>
                    <input type="password" id="signup-password" placeholder="Password" class="w-full p-3 rounded-md" required>
                    <div class="grid grid-cols-2 gap-4">
                        <input type="number" id="signup-age" placeholder="Age" class="w-full p-3 rounded-md" required>
                        <select id="signup-gender" class="w-full p-3 rounded-md" required>
                            <option value="" disabled selected>Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <input type="text" id="signup-profession" placeholder="Profession" class="w-full p-3 rounded-md" required>
                    <button type="submit" class="w-full btn-blue p-3">Sign Up</button>
                    <p id="signup-error" class="text-red-400 text-sm text-center h-4"></p>
                </form>
                <p class="text-center text-sm mt-4">Already have an account? <a href="#" id="show-login-link" class="font-bold text-bright-pink hover:underline">Login</a></p>
            </div>
            <div id="forgot-password-view" class="hidden p-8">
                 <h2 class="font-logo text-4xl text-bright-pink mb-6 text-center">Reset Password</h2>
                 <form id="forgot-password-form" class="auth-form space-y-4">
                    <p class="text-sm text-center text-gray-300">Enter your email and we'll send you a link to reset your password.</p>
                    <input type="email" id="reset-email" placeholder="Email" class="w-full p-3 rounded-md" required>
                    <button type="submit" class="w-full btn-blue p-3">Send Reset Link</button>
                    <p id="reset-message" class="text-green-400 text-sm text-center h-4"></p>
                 </form>
                 <p class="text-center text-sm mt-4"><a href="#" id="back-to-login-link" class="font-bold text-bright-pink hover:underline">Back to Login</a></p>
            </div>
        </div>
    </div>
    
    <!-- Floating Chatbot -->
    <div id="chatbot-container" class="fixed bottom-6 right-6 w-80 h-96 bg-gray-900/80 backdrop-blur-sm rounded-t-xl shadow-xl flex flex-col border border-white/10 z-50 hidden">
        <div class="bg-gray-900 px-4 py-3 rounded-t-xl flex justify-between items-center">
            <h3 class="font-bold text-bright-pink">LLB.ai Assistant</h3>
            <button id="close-chatbot" class="text-gray-400 hover:text-white text-2xl">&times;</button>
        </div>
        <div id="chatbot-messages" class="flex-1 p-4 overflow-y-auto text-sm space-y-2">
            <!-- Messages will appear here -->
        </div>
        <div class="p-3 border-t border-white/10">
            <input id="chatbot-input" type="text" placeholder="Type your question..." 
                   class="w-full bg-gray-700 text-white rounded px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-bright-pink">
        </div>
    </div>

    <!-- Chatbot Toggle Button -->
    <button id="chatbot-toggle" class="fixed bottom-6 right-6 bg-bright-pink text-white w-14 h-14 rounded-full flex items-center justify-center shadow-lg hover:scale-105 transition-transform z-40">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
        </svg>
    </button>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        import { 
            getAuth, 
            createUserWithEmailAndPassword, 
            signInWithEmailAndPassword, 
            sendEmailVerification,
            sendPasswordResetEmail,
            onAuthStateChanged,
            signOut,
            updateProfile
        } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";
        import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAzumRqz2Lat4M_CW9LtiUebaZTQIXJ_MA",
            authDomain: "llbai-baefd.firebaseapp.com",
            projectId: "llbai-baefd",
            storageBucket: "llbai-baefd.appspot.com",
            messagingSenderId: "12532846117",
            appId: "1:12532846117:web:0e3b74c0ec2f495b96f9cc",
            measurementId: "G-D0HK063ZF8"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // --- DOM Elements ---
        const authModal = document.getElementById('auth-modal');
        const loginSignupBtn = document.getElementById('login-signup-btn');
        const tryFreeBtn = document.getElementById('try-free-btn');
        const closeAuthModalBtn = document.getElementById('close-auth-modal');
        const loginView = document.getElementById('login-view');
        const signupView = document.getElementById('signup-view');
        const forgotPasswordView = document.getElementById('forgot-password-view');
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        const forgotPasswordForm = document.getElementById('forgot-password-form');
        const showSignupLink = document.getElementById('show-signup-link');
        const showLoginLink = document.getElementById('show-login-link');
        const forgotPasswordLink = document.getElementById('forgot-password-link');
        const backToLoginLink = document.getElementById('back-to-login-link');
        const loginError = document.getElementById('login-error');
        const signupError = document.getElementById('signup-error');
        const resetMessage = document.getElementById('reset-message');
        const userInfoNav = document.getElementById('user-info-nav');
        const userGreeting = document.getElementById('user-greeting');
        const logoutBtn = document.getElementById('logout-btn');
        const faqToggles = document.querySelectorAll('.faq-toggle');
        const animationContainer = document.getElementById('animation-container');

        // --- Auth State ---
        onAuthStateChanged(auth, user => {
            if (user) {
                loginSignupBtn.classList.add('hidden');
                userInfoNav.classList.remove('hidden');
                userInfoNav.classList.add('flex');
                userGreeting.textContent = `Hi, ${user.displayName || user.email.split('@')[0]}!`;
            } else {
                loginSignupBtn.classList.remove('hidden');
                userInfoNav.classList.add('hidden');
                userInfoNav.classList.remove('flex');
            }
        });

        // --- Modals and Views ---
        const openModal = () => authModal.classList.remove('hidden');
        const closeModal = () => authModal.classList.add('hidden');
        const showLoginView = () => { signupView.classList.add('hidden'); forgotPasswordView.classList.add('hidden'); loginView.classList.remove('hidden'); };
        const showSignupView = () => { loginView.classList.add('hidden'); forgotPasswordView.classList.add('hidden'); signupView.classList.remove('hidden'); };
        const showForgotPasswordView = () => { loginView.classList.add('hidden'); signupView.classList.add('hidden'); forgotPasswordView.classList.remove('hidden'); };

        loginSignupBtn.addEventListener('click', openModal);
        tryFreeBtn.addEventListener('click', openModal);
        closeAuthModalBtn.addEventListener('click', closeModal);
        showSignupLink.addEventListener('click', (e) => { e.preventDefault(); showSignupView(); });
        showLoginLink.addEventListener('click', (e) => { e.preventDefault(); showLoginView(); });
        forgotPasswordLink.addEventListener('click', (e) => { e.preventDefault(); showForgotPasswordView(); });
        backToLoginLink.addEventListener('click', (e) => { e.preventDefault(); showLoginView(); });
        
        // --- Forms ---
        signupForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            signupError.textContent = '';
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const age = document.getElementById('signup-age').value;
            const gender = document.getElementById('signup-gender').value;
            const profession = document.getElementById('signup-profession').value;

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;
                await updateProfile(user, { displayName: name });
                await sendEmailVerification(user);
                alert('Verification email sent! Please check your inbox.');
                await setDoc(doc(db, "users", user.uid), { name, email, age, gender, profession, createdAt: new Date() });
                closeModal();
            } catch (error) {
                signupError.textContent = error.message;
            }
        });

        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            loginError.textContent = '';
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            try {
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                if (!userCredential.user.emailVerified) {
                    loginError.textContent = 'Please verify your email before logging in.';
                    await signOut(auth);
                    return;
                }
                closeModal();
            } catch (error) {
                loginError.textContent = error.message;
            }
        });
        
        forgotPasswordForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            resetMessage.textContent = '';
            const email = document.getElementById('reset-email').value;
            try {
                await sendPasswordResetEmail(auth, email);
                resetMessage.textContent = 'Password reset link sent! Check your inbox.';
            } catch (error) {
                resetMessage.textContent = error.message;
            }
        });

        logoutBtn.addEventListener('click', async () => {
            try { await signOut(auth); } catch (error) { alert(error.message); }
        });

        // --- UI Interactions ---
        faqToggles.forEach(toggle => {
            toggle.addEventListener('click', () => {
                const content = toggle.nextElementSibling;
                const icon = toggle.querySelector('span');
                if (content.style.maxHeight) {
                    content.style.maxHeight = null;
                    icon.textContent = '+';
                } else {
                    document.querySelectorAll('.faq-content').forEach(c => c.style.maxHeight = null);
                    document.querySelectorAll('.faq-toggle span').forEach(s => s.textContent = '+');
                    content.style.maxHeight = content.scrollHeight + "px";
                    icon.textContent = '-';
                }
            });
        });
        if(faqToggles.length) { 
            const firstFaqContent = faqToggles[0].nextElementSibling;
            faqToggles[0].querySelector('span').textContent = '-';
            firstFaqContent.style.maxHeight = firstFaqContent.scrollHeight + "px";
        }
        
        const scroller = document.querySelector('.testimonial-scroller');
        const prevBtn = document.querySelector('.testimonial-nav.prev');
        const nextBtn = document.querySelector('.testimonial-nav.next');
        if (scroller) {
            const cardWidth = scroller.querySelector('.testimonial-card').clientWidth;
            const updateNavButtons = () => {
                prevBtn.disabled = scroller.scrollLeft < 10;
                nextBtn.disabled = scroller.scrollLeft >= (scroller.scrollWidth - scroller.clientWidth - 10);
            };
            prevBtn.addEventListener('click', () => scroller.scrollBy({ left: -cardWidth, behavior: 'smooth' }));
            nextBtn.addEventListener('click', () => scroller.scrollBy({ left: cardWidth, behavior: 'smooth' }));
            scroller.addEventListener('scroll', updateNavButtons);
            window.addEventListener('resize', updateNavButtons);
            updateNavButtons();
        }

        // --- Chatbot Functionality ---
        const chatbotToggle = document.getElementById('chatbot-toggle');
        const chatbotContainer = document.getElementById('chatbot-container');
        const closeChatbot = document.getElementById('close-chatbot');
        const chatbotMessages = document.getElementById('chatbot-messages');
        const chatbotInput = document.getElementById('chatbot-input');

        const initialMessages = [ "Hello! I'm your LLB.ai assistant. 👋", "I can help you understand how LLB.ai can assist with your legal document needs.", "Feel free to ask me anything about our services!" ];
        
        chatbotToggle.addEventListener('click', () => {
            chatbotContainer.classList.toggle('hidden');
            if (!chatbotContainer.classList.contains('hidden') && chatbotMessages.children.length === 0) {
                initialMessages.forEach((msg, index) => setTimeout(() => addBotMessage(msg), index * 500));
            }
        });
        closeChatbot.addEventListener('click', () => chatbotContainer.classList.add('hidden'));

        function addMessageToChat(text, type) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('chatbot-message', type === 'user' ? 'user-message' : 'bot-message');
            messageDiv.textContent = text;
            chatbotMessages.appendChild(messageDiv);
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }
        const addBotMessage = (text) => addMessageToChat(text, 'bot');
        const addUserMessage = (text) => addMessageToChat(text, 'user');

        chatbotInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && chatbotInput.value.trim()) {
                const userMessage = chatbotInput.value.trim();
                addUserMessage(userMessage);
                chatbotInput.value = '';
                setTimeout(() => {
                    if (userMessage.toLowerCase().includes('price')) {
                        addBotMessage("We offer a free trial! After that, plans start at $9.99/month.");
                    } else {
                        addBotMessage("For details on features or security, please see the main page. For legal advice, consult a qualified professional.");
                    }
                }, 500);
            }
        });

        // --- NEW: Doodle Creation ---
        function createDoodles() {
            const doodles = ['&#9878;', '&#167;', '&#128214;', '&#128196;', '&#128203;']; // Gavel, Section, Book, Scroll, Clipboard
            const doodleCount = 20;
            for (let i = 0; i < doodleCount; i++) {
                const doodle = document.createElement('div');
                doodle.classList.add('doodle');
                doodle.innerHTML = doodles[Math.floor(Math.random() * doodles.length)];
                doodle.style.left = `${Math.random() * 100}vw`;
                doodle.style.animationDuration = `${10 + Math.random() * 15}s`;
                doodle.style.animationDelay = `${Math.random() * 10}s`;
                doodle.style.setProperty('--x-start', `${-5 + Math.random() * 10}vw`);
                doodle.style.setProperty('--x-end', `${-5 + Math.random() * 10}vw`);
                animationContainer.appendChild(doodle);
            }
        }
        createDoodles();

    </script>
</body>
</html>
